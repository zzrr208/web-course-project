# 项目说明文档
说明文档
一、项目背景
随着互联网数据的快速增长，网络上存在大量公开且结构化的数据。电影数据作为一种常见的数据类型，广泛应用于影视行业的分析与推荐。
本项目是为 Python 程序设计课程设计的，通过爬虫技术从公开的网页抓取电影信息，使用 SQLite 数据库存储，并实现数据查询与导出功能。项目旨在展示爬虫、数据库操作与数据处理的能力。

二、项目目标
本系统的目标是实现一个完整的电影数据采集与管理系统，包含以下功能：
从公开网页抓取电影数据：包括电影名称、上映年份、详情链接等信息。
数据存储：使用 SQLite 数据库存储抓取到的电影数据。
数据查询：实现用户根据年份查询电影信息的功能，展示电影数量及相关电影标题与链接。
数据导出：将电影数据导出为 CSV 格式，方便后续查看与使用。

三、技术方案
3.1 爬虫技术
本项目的爬虫功能采用 Python 的 requests 库发送 HTTP 请求，使用 BeautifulSoup 库解析 HTML 页面，从 Wikipedia 获取电影信息。
具体技术栈：
requests：用于发送 HTTP 请求
BeautifulSoup：用于解析网页 HTML
SQLite：用于存储数据

3.2 数据库设计
数据存储使用 SQLite 作为嵌入式数据库，数据库中包含一张电影表 films，包含以下字段：

字段名	类型	说明
id	INTEGER	主键，自增
title	TEXT	电影名称
url	TEXT	电影详情页链接（唯一）
year	INTEGER	上映年份
source	TEXT	数据来源（如 Wikipedia）
数据库采用了 url 字段的 UNIQUE 约束，保证每部电影只存储一次。

3.3 数据查询
查询功能允许用户通过命令行输入年份，程序会返回该年份的电影数量及电影标题列表。
查询功能的设计：
输入年份：用户输入想查询的年份，程序返回该年份的电影数量及前 N 条电影标题和链接。
查询实现：使用 SQLite 的 SELECT 语句进行查询，支持分页查询和关键词过滤功能。

3.4 数据导出
系统支持将数据库中的电影数据导出为 CSV 文件，以便在 Excel 等软件中查看。
导出功能实现：
从数据库中读取所有电影数据
使用 csv 库将数据写入 CSV 文件，字段包括 title、year、source、url

四、系统实现
4.1 系统架构
系统采用模块化设计，整体架构如下：

┌───────────────┐
│  数据来源层   │  ← Wikipedia 公开电影页面
└───────────────┘
          ↓
┌───────────────┐
│   爬虫模块    │  spider.py
└───────────────┘
          ↓
┌───────────────┐
│  数据存储层   │  SQLite（films.db）
└───────────────┘
          ↓
┌───────────────┐
│  功能服务层   │  查询 / 导出
└───────────────┘
          ↓
┌───────────────┐
│  用户交互层   │  命令行输入输出
└───────────────┘

4.2 模块划分
爬虫模块（spider.py）
获取网页数据，提取电影标题、URL 和年份
将数据存入 films_2000_2024.json
数据库模块（db.py）
创建 SQLite 数据库
将爬取的电影数据导入数据库 films.db
提供数据统计功能
查询模块（query.py）
提供用户命令行查询接口
根据年份查询电影数据，返回数量和标题
导出模块（export_csv.py）
将数据库中的数据导出为 CSV 文件

4.3 数据流动
爬取：从 Wiipedia 页面获取电影数据（2000–2024）
存储：将数据存入 SQLite 数据库 films.db
查询：用户输入年份，程序查询数据库并返回该年份的电影信息
导出：将数据库中的所有电影数据导出为 films.csv 文件

五、使用说明
5.1 系统运行
爬虫数据抓取
python spider.py
将数据导入 SQLite 数据库
python db.py
查询电影数据
python query.py
导出数据到 CSV 文件
python export_csv.py

5.2 数据库结构
films.db：存储电影数据的 SQLite 数据库
films.csv：导出的 CSV 文件，包含所有电影数据

六、总结与展望

本项目展示了如何通过 Python 实现爬虫数据抓取、存储、查询与导出功能。通过使用 SQLite 数据库存储数据，并提供了查询和导出功能，系统可以有效地处理并展示电影数据。
未来可以扩展为 Web 应用（使用 Flask/Django），或者添加更多数据字段，如导演、演员、电影简介等。

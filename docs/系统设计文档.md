# 系统设计文档.md
一、系统概述
1.1 系统背景
随着互联网信息的快速发展，网络上存在大量结构化和半结构化的数据。
本课程设计以 Python 程序设计课程为背景，设计并实现一个基于 Python 的电影数据采集与分析系统，通过爬虫技术自动获取电影信息，并对数据进行存储、查询与导出，综合锻炼 Python 编程、数据处理及数据库应用能力。

1.2 系统目标
本系统的主要目标包括：
实现对互联网上公开电影数据的自动化采集
对采集到的数据进行结构化处理与存储
提供基于数据库的查询与统计功能
支持将数据导出为通用格式，便于后续分析
系统结构清晰，功能模块划分合理，易于扩展

二、需求分析
2.1 功能需求
根据课程设计要求，系统需满足以下功能需求：
数据爬取功能
能够从公开网页按年份爬取电影信息
支持多年份（2000–2024）连续采集
具备基本的异常处理和数据去重能力

数据存储功能
将爬取的数据存储到数据库中
数据表结构设计合理，字段完整
保证数据唯一性，避免重复插入

数据查询功能
支持用户输入年份进行查询
显示该年份电影数量及部分电影信息
提供友好的命令行交互方式

数据导出功能
支持将数据库中的数据导出为 CSV 文件
导出的文件可被常见办公软件直接打开

2.2 非功能需求

易用性
系统采用命令行方式运行，操作简单
提供明确的提示信息和运行说明

稳定性
单个年份爬取失败不影响整体运行
数据库操作具备基本异常处理能力

可维护性
模块划分清晰，代码结构合理
各功能模块相互独立，便于后续扩展

三、系统总体设计
3.1 系统架构设计
系统采用 模块化设计思想，整体架构分为以下几层：

┌───────────────┐
│  数据来源层   │  ← Wikipedia 公开电影页面
└───────────────┘
          ↓
┌───────────────┐
│   爬虫模块    │  spider.py
└───────────────┘
          ↓
┌───────────────┐
│  数据存储层   │  SQLite（films.db）
└───────────────┘
          ↓
┌───────────────┐
│  功能服务层   │  查询 / 导出
└───────────────┘
          ↓
┌───────────────┐
│  用户交互层   │  命令行输入输出
└───────────────┘

系统通过爬虫模块获取数据，经处理后存储到数据库，再由查询与导出模块对外提供功能。

3.2 技术选型说明
技术	选型原因
Python	语法简洁，适合快速开发
requests	处理 HTTP 请求简单稳定
BeautifulSoup	适合解析静态 HTML 页面
SQLite	轻量级数据库，无需独立部署
CSV	通用数据交换格式，易于使用

SQLite 作为嵌入式数据库，非常适合教学和中小规模数据存储，避免了复杂的数据库部署过程。

四、模块设计
4.1 爬虫模块（spider.py）
主要职责：
构造目标网页 URL
发送 HTTP 请求获取页面内容
解析页面中的电影信息
按年份循环爬取并汇总数据
对数据进行简单清洗和去重

核心字段设计：
title：电影名称
url：电影详情页链接
year：上映年份
source：数据来源

4.2 数据库模块（db.py）
主要职责：
初始化 SQLite 数据库
创建数据表及索引
批量导入 JSON 数据
提供基础统计查询功能
数据库表设计：
CREATE TABLE films (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    url TEXT NOT NULL UNIQUE,
    year INTEGER,
    source TEXT
);
通过对 url 字段设置唯一约束，实现数据去重。

4.3 查询模块（query.py）
主要职责：
提供交互式命令行界面
接收用户输入的年份
查询数据库中对应年份的数据
输出电影数量及电影列表
该模块增强了系统的可用性，使系统具备基本的数据服务能力。

4.4 数据导出模块（export_csv.py）
主要职责：
从数据库中读取电影数据
按指定格式导出为 CSV 文件
支持后续数据分析与使用

五、数据流程设计
系统整体数据流程如下：
爬虫模块按年份抓取电影数据
将结果保存为 JSON 文件
数据库模块读取 JSON 并写入 SQLite
查询模块/导出模块从数据库读取数据
将结果展示给用户或导出文件

六、系统扩展性设计
本系统具有良好的扩展性，后续可扩展方向包括：
增加电影详情页爬取（导演、演员、简介等）
接入 Web 界面（Flask/Django）
替换为 MySQL 等服务端数据库
增加数据可视化功能（图表展示）

七、小结

本系统采用模块化设计，结构清晰，功能完整，能够满足课程设计对爬虫、数据库及综合应用的要求。
系统在保证实现基本功能的同时，兼顾了稳定性、易用性和可扩展性，具有较好的教学与实践价值。
